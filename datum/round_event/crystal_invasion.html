<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;round_event&#x2F;crystal_invasion - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/round_event/crystal_invasion.html#var">Var Details</a> - <a href="datum/round_event/crystal_invasion.html#proc">Proc Details</a></header>
<main>
<h1>/<a href="datum.html">datum</a>/<a href="datum/round_event/crystal_invasion.html">round_event/crystal_invasion</a>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L37">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 37"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#var/dest_crystal">dest_crystal</a></th><td>Store the destabilized crystal</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#var/is_zk_scenario">is_zk_scenario</a></th><td>Check if the event will end badly</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#var/portal_numbers">portal_numbers</a></th><td>Max number of portals that can spawn per type of wave</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#var/spawned">spawned</a></th><td>Check if this is the first wave or not</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#var/wave_name">wave_name</a></th><td>Is the name of the wave, used to check wich wave will be generated</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/choose_wave_type">choose_wave_type</a></th><td>Choose the type of the wave</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/do_zk_event">do_zk_event</a></th><td>This proc actually manages the end of the event</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/finish_event">finish_event</a></th><td>Handles wich end the event shall have</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/more_portals">more_portals</a></th><td>If after 10 minutes the crystal is not stabilized more portals are spawned and the event progress further</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/on_dest_crystal_qdel">on_dest_crystal_qdel</a></th><td>Handle the dest_crystal var to be null if the destabilized crystal is deleted by a badmin before the end of the event</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/restore">restore</a></th><td>Restore the Destabilized Crystal as it was before</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/spawn_anomaly">spawn_anomaly</a></th><td>Spawn an anomaly randomly in a different location than spawn_portal()</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/spawn_portal">spawn_portal</a></th><td>Spawn one portal in a random location choosen from the generic_event_spawns list</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/spawn_portals">spawn_portals</a></th><td>Pick a location from the generic_event_spawns list that are present on the maps and call the spawn anomaly and portal procs</td></tr>
            <tr><th><a href="datum/round_event/crystal_invasion.html#proc/zk_event_announcement">zk_event_announcement</a></th><td>This proc announces that the event is concluding with the worst scenario</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/dest_crystal"><aside class="declaration">var </aside>dest_crystal
            <aside>&ndash; /<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/destabilized_crystal.html">destabilized_crystal</a></aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L48">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 48"/></a></h3>
        <p>Store the destabilized crystal</p><h3 id="var/is_zk_scenario"><aside class="declaration">var </aside>is_zk_scenario
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L50">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 50"/></a></h3>
        <p>Check if the event will end badly</p><h3 id="var/portal_numbers"><aside class="declaration">var </aside>portal_numbers
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L44">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 44"/></a></h3>
        <p>Max number of portals that can spawn per type of wave</p><h3 id="var/spawned"><aside class="declaration">var </aside>spawned
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L46">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 46"/></a></h3>
        <p>Check if this is the first wave or not</p><h3 id="var/wave_name"><aside class="declaration">var </aside>wave_name
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L42">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 42"/></a></h3>
        <p>Is the name of the wave, used to check wich wave will be generated</p><h2 id="proc">Proc Details</h2><h3 id="proc/choose_wave_type"><aside class="declaration">proc </aside>choose_wave_type<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L60">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 60"/></a></aside>
        </h3>
        <p>Choose the type of the wave</p><h3 id="proc/do_zk_event"><aside class="declaration">proc </aside>do_zk_event<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L180">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 180"/></a></aside>
        </h3>
        <p>This proc actually manages the end of the event</p><h3 id="proc/finish_event"><aside class="declaration">proc </aside>finish_event<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L164">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 164"/></a></aside>
        </h3>
        <p>Handles wich end the event shall have</p><h3 id="proc/more_portals"><aside class="declaration">proc </aside>more_portals<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L142">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 142"/></a></aside>
        </h3>
        <p>If after 10 minutes the crystal is not stabilized more portals are spawned and the event progress further</p><h3 id="proc/on_dest_crystal_qdel"><aside class="declaration">proc </aside>on_dest_crystal_qdel<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L204">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 204"/></a></aside>
        </h3>
        <p>Handle the dest_crystal var to be null if the destabilized crystal is deleted by a badmin before the end of the event</p><h3 id="proc/restore"><aside class="declaration">proc </aside>restore<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L193">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 193"/></a></aside>
        </h3>
        <p>Restore the Destabilized Crystal as it was before</p><h3 id="proc/spawn_anomaly"><aside class="declaration">proc </aside>spawn_anomaly<aside>(/list/spawners) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L127">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 127"/></a></aside>
        </h3>
        <p>Spawn an anomaly randomly in a different location than spawn_portal()</p><h3 id="proc/spawn_portal"><aside class="declaration">proc </aside>spawn_portal<aside>(/list/wave_type, /list/spawners) 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L134">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 134"/></a></aside>
        </h3>
        <p>Spawn one portal in a random location choosen from the generic_event_spawns list</p><h3 id="proc/spawn_portals"><aside class="declaration">proc </aside>spawn_portals<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L101">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 101"/></a></aside>
        </h3>
        <p>Pick a location from the generic_event_spawns list that are present on the maps and call the spawn anomaly and portal procs</p><h3 id="proc/zk_event_announcement"><aside class="declaration">proc </aside>zk_event_announcement<aside>() 
        
    
            <a href="https://github.com/tgstation/tgstation/blob/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2/code/modules/events/crystal_event.dm#L172">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;events&#x2F;crystal_event.dm 172"/></a></aside>
        </h3>
        <p>This proc announces that the event is concluding with the worst scenario</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/tgstation/tgstation/tree/0b2d1eeab7d4054d8d840c77a8e3aba526a04bd2">0b2d1ee</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.2.1</a></footer>
</body>
</html>
